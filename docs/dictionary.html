<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
	    <meta charset="utf-8"/>
	    <title>Chord Dictionary</title>
	    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	    <meta name="description" content=""/>
	    <meta name="author" content="Guilherme I F L Weizenmann"/>
	    <meta name="keywords" content="chords lyrics acordes letras música"/>
	    <meta name="generator" content="JBake"/>

	    <link href="https://giflw.github.io/chords/css/bulma.css" rel="stylesheet"/>
        <link href="https://giflw.github.io/chords/css/bulma-badge.css" rel="stylesheet"/>
	    <link href="https://giflw.github.io/chords/css/bulmaswatch.css" rel="stylesheet"/>
	    <link href="https://giflw.github.io/chords/css/asciidoctor.css" rel="stylesheet"/>
	    <link href="https://giflw.github.io/chords/css/base.css" rel="stylesheet"/>
        <link href="https://giflw.github.io/chords/css/base-print.css" rel="stylesheet" media="print"/>
	    <link href="https://giflw.github.io/chords/css/base-screen.css" rel="stylesheet" media="screen"/>
	    <link href="https://giflw.github.io/chords/css/meslo-nerd.css" rel="stylesheet"/>
	    <link href="https://giflw.github.io/chords/css/prettify.css" rel="stylesheet"/>
        <link href="https://giflw.github.io/chords/css/fontawesome.min.css" rel="stylesheet"/>
        <link href="https://giflw.github.io/chords/css/chordictionary.css" rel="stylesheet"/>


	    <!-- Fav and touch icons -->
	    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png"/>
	    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png"/>
	    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png"/>
	    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png"/>-->
	    <link rel="shortcut icon" href="https://giflw.github.io/chords/favicon.ico"/>
	</head>
	<body onload="prettyPrint()">
	<div id="wrap">
		<div>
        <div class="navbar is-white is-screen-only">
            <div class="container">
                <div class="navbar-brand">
                    <a class="navbar-item" href="https://giflw.github.io/chords/">
                        <span class="fa-stack">
                            <i class="fa-fw fad fa-guitars fa-stack-1x has-text-danger"
                                style="--fa-primary-opacity: 0; --fa-secondary-opacity: 1.0"></i>
                            <i class="fa-fw fad fa-guitars fa-stack-1x has-text-primary"
                                style="--fa-primary-opacity: 1;--fa-secondary-opacity: 0"></i>
                        </span>
                        GiFlw
                    </a>
                    <span class="navbar-item cloak">
                        <span class="control has-icons-right">
                            <input class="input is-primary is-small search-input" type="text" title="Filtrar" />
                            <span class="icon is-right">
                                <i class="fas fa-fw fa-search"></i>
                            </span>
                        </span>
                    </span>
                    <a class="navbar-burger" data-target="navbar-top">
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                    </a>
                </div>
                <div id="navbar-top" class="navbar-menu">
                    <div class="navbar-start">
                        <a class="navbar-item" href="https://giflw.github.io/chords/index.html">Músicas</a>
                        <a class="navbar-item" href="https://giflw.github.io/chords/repertorio.html">Repertórios</a>
                        <a class="navbar-item" href="https://giflw.github.io/chords/dictionary.html">Dicionário de Acordes</a>
                        <a class="navbar-item" href="https://giflw.github.io/chords/theory/index.html">Teoria (Música e Instrumento)</a>
                        <a class="navbar-item" href="https://giflw.github.io/chords/about.html">Sobre</a>
                    </div>
                    <div class="navbar-end">
                        <a class="navbar-item" href="https://giflw.github.io/chords/feed.xml">Feed RSS</a>
                    </div>
                </div>
            </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', () => {

                // Get all "navbar-burger" elements
                const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

                // Add a click event on each of them
                $navbarBurgers.forEach(el => {
                    el.addEventListener('click', () => {

                        // Get the target from the "data-target" attribute
                        const target = el.dataset.target;
                        const $target = document.getElementById(target);

                        // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
                        el.classList.toggle('is-active');
                        $target.classList.toggle('is-active');

                    });
                });

            });

            String.prototype.isNormalized = function() {
                return /^[A-Z0-9 -\.]+$/.test(this);
            }

            String.prototype.unacent = function() {
                console.log('NORMAL?', this.isNormalized())
                return (this.isNormalized() ? this : this.normalize("NFKD")).replace(/\p{Diacritic}/gu, "");
            }

            String.prototype.includesIgnoreCase = function (other) {
                return this.unacent().toLowerCase().includes(other.unacent().toLowerCase());
            }

            document.addEventListener("DOMContentLoaded", () => {
                let searchables = document.querySelectorAll('.searchable');
                let searchTimeoutHandler;

                function hideAndSeek(searchable, text) {
                    [...searchable.children].forEach(el => {
                        el.dataset.displayOriginal = el.dataset.displayOriginal || window.getComputedStyle(el).display;
                        el.style.display =  el.textContent.includesIgnoreCase(text) ? el.dataset.displayOriginal : 'none';
                    })
                }

                function doSearch(text) {
                    searchables.forEach(searchable => hideAndSeek(searchable, text));
                }

                function search(input) {
                    clearTimeout(searchTimeoutHandler);
                    searchTimeoutHandler = setTimeout(() => doSearch(input.target.value), 250);
                }

                console.log('searchables', searchables)
                if (searchables.length > 0) {
                    document.querySelectorAll('.search-input').forEach(el => {
                        el.oninput = search;
                        let cloacked = el;
                        while (!cloacked.classList.contains('cloak')) {
                            cloacked = cloacked.parentNode
                        }
                        cloacked.classList.remove('cloak');
                    });
                }

            });


        </script>

    </div>
		<div class="container">
	
			<div class="page-header">
				<h1>Chord Dictionary</h1>
			</div>
		
			<p><em>10 novembro 2023</em></p>
		
			<p><div class="container m-3 p-3"> 
 <form class="columns"> 
  <fieldset class="column box"> <legend class="title is-4 mb-2">Instrumento</legend> 
   <div class="columns"> <label class="column"> <input type="radio" checked name="tuning" value="guitar.standard"> Violão/Guitarra </label> <label class="column"> <input type="radio" name="tuning" value="ukulele.standard"> Ukulele </label> <label class="column"> <input type="radio" name="tuning" value="bass.standard"> Baixo </label> 
   </div> 
  </fieldset> 
  <fieldset class="column box"> <legend class="title is-4 mb-2">Acorde</legend> 
   <div class="columns"> <label class="column is-two-thirds"> Nome do acorde: <input type="text" id="chord-name"> </label> 
    <div class="column is-one-third"> <button class="button" type="button" onclick="showChords()">Visualizar</button> 
    </div> 
   </div> 
  </fieldset> 
 </form> 
 <div id="chords-list"> 
 </div> 
</div> 
<script>
function showChords() {
    document.querySelector('#chords-list').innerHTML = '';

    const name = document.querySelector('#chord-name').value;

    const instrumentTuning = [...document.querySelectorAll('*[name="tuning"]')].filter(el => el.checked)[0].value.split('.');

    let tuning = chordictionary.tuning;
    for (const insTun of instrumentTuning) {
        tuning = tuning[insTun];
    }

    const instrument = new chordictionary.Instrument(tuning.join(''), 12, 5, 4);
    let tabs = instrument.getChordsList(name).chordList;

    //console.log(tabs)

    tabs.sort((a, b) => {
        let ax = a.tab.filter(f => f == "x").length;
        let bx = b.tab.filter(f => f == "x").length;
        const byXCount = ax > bx ? 1 : (ax < bx ? -1 : 0);
        ax = a.tab.map((el, idx) => el == "x" ? idx : 0).reduce((p, c) => p + c);
        bx = b.tab.map((el, idx) => el == "x" ? idx : 0).reduce((p, c) => p + c);
        const byXCountAndXString = byXCount != 0 ? byXCount : (ax > bx ? 1 : (ax < bx ? -1: 0));
        ax = a.tab.map((el, idx) => el == "x" ? idx : el).reduce((p, c) => p + c);
        bx = b.tab.map((el, idx) => el == "x" ? idx : el).reduce((p, c) => p + c);
        const byXCountAndXStringAndHandProcimity = byXCountAndXString != 0 ? byXCountAndXString : (ax > bx ? 1 : (ax < bx ? -1: 0));
        return byXCountAndXStringAndHandProcimity;
    });

    tabs = tabs.filter( tab => {
        const freqs = tab.tab.reduce(function (acc, curr) {
            return acc[curr] ? ++acc[curr] : acc[curr] = 1, acc;
        }, {0: 0, x: 0});
        // probably impossible bars
        if (freqs[1] > 2 && freqs[0] > 0 && (freqs["x"] == 0 || tab.tab[0] != "x")) {
            return false;
        }
        if (freqs[0] == 0 && freqs[1] >= 2) {
            return true;
        }
        if (tab.tab.filter(f => f != "x" && f != 0).length <= 4) {
            return true;
        }
        return false;
    });
    tabs.forEach(tab => {
        tab.info = instrument.getChordInfo(tab).first();
    });
    if (instrumentTuning[0] == 'guitar') {
        tabs.sort((a, b) => {
            if (a.info.name == b.info.name) {
                return 0;
            }
            if (a.info.name == name) {
                return -1;
            }
            if (b.info.name == name) {
                return 1;
            }
            if (a.info.name.startsWith(name)) {
                return -1;
            }
            if (b.info.name.startsWith(name)) {
                return 1;
            }
            return a.info.name.localeCompare(b.info.name);
        });
    }
    if (tabs?.length > 0) {
        let diagrams = '';
        tabs.forEach(tab => {
            diagrams += '<div class="m-1 p-1" style="display: inline-block">' + instrument.getChordLayout(tab.tab, tab.info) + '</div>';
        });
        document.querySelector('#chords-list').innerHTML = diagrams;
    }

}
</script></p>
		
			<hr />
		</div>
	</div>
	<div>
            <!--<footer class="footer text-center is-screen-only">
                <p>
                    &copy; 2023
                    |
                    Última atualização
                    16/02/2024 20:20:02
                </p>
            </footer>-->

            
                <script src="https://giflw.github.io/chords/js/prettify.js"></script>
                <script src="https://giflw.github.io/chords/js/chordictionary.min.js"></script>
                <script src="https://giflw.github.io/chords/js/chords.js"></script>
            
        </div>
    </body>
</html>