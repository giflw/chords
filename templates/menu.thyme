<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <body>
        <div th:fragment="menu">
            <div class="navbar is-white is-screen-only"
            th:with="baseUrl=${config.site_host}">
                <div class="container">
                    <div class="navbar-brand">
                        <a class="navbar-item" th:href="${baseUrl}">
                            <span class="fa-stack">
                                <i class="fa-fw fad fa-guitars fa-stack-1x has-text-danger" style="--fa-primary-opacity: 0; --fa-secondary-opacity: 1.0"></i>
                                <i class="fa-fw fad fa-guitars fa-stack-1x has-text-primary" style="--fa-primary-opacity: 1;--fa-secondary-opacity: 0"></i>
                            </span>
                            GiFlw
                        </a>
                        <a class="navbar-burger" data-target="navbar-top">
                            <span aria-hidden="true"></span>
                            <span aria-hidden="true"></span>
                            <span aria-hidden="true"></span>
                        </a>
                    </div>
                    <div id="navbar-top" class="navbar-menu">
                        <div class="navbar-start">
                            <a class="navbar-item" th:href="${baseUrl} + 'index.html'">Músicas</a>
                            <a class="navbar-item" th:href="${baseUrl} + 'repertorio.html'">Repertórios</a>
                            <a class="navbar-item" th:href="${baseUrl} + 'batidas.html'">Batidas</a>
                            <a class="navbar-item" th:href="${baseUrl} + 'dedilhados.html'">Dedilhados</a>
                            <a class="navbar-item" th:href="${baseUrl} + 'about.html'">Sobre</a>
                            <a class="navbar-item" th:href="${baseUrl}+${config.feed_file}">Feed RSS</a>
                            <span id="search-input" class="navbar-item cloak">
                                <span class="control has-icons-right">
                                    <input class="input is-primary is-small" type="text" title="Filtrar" oninput="search(this)" />
                                    <span class="icon is-right">
                                        <i class="fas fa-fw fa-search"></i>
                                    </span>
                                    <script>
                                        document.addEventListener("DOMContentLoaded", () => {
                                            let searchables = document.querySelectorAll('.searchable');
                                            console.log(searchables.length)
                                            if (searchables.length > 0) {
                                                document.getElementById('search-input').classList.remove('cloak')
                                            }
                                            let searchTimeoutHandler;

                                            function hideAndSeek(searchable,text) {
                                                console.log(text, searchable);
                                            }

                                            function doSearch(text) {
                                                searchables.forEach(searchable => hideAndSeek(searchable,text));
                                            }

                                            function search(input) {
                                                clearTimeout(searchTimeoutHandler);
                                                searchTimeoutHandler = setTimeout(() => doSearch(input.value), 250);
                                            }
                                        });
                                    </script>
                                </span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>